define(["backboneLocalforage"],function(e){return Backbone.Model.extend({preinitialize:function(){this.worker=new Worker(URL.createObjectURL(new Blob(["self.onmessage=function(event){self.postMessage(event.data,[event.data])}"],{type:"text/javascript"})))},defaults:function(){return{active:!0,order:App.router.collection.nextOrder()}},initialize:function(){this.worker.addEventListener("message",function(e){this.reader=new FileReader,this.reader.addEventListener("load",function(e){console.log(e.currentTarget.result)},!1),this.reader.readAsBinaryString(new Blob([e.data],{type:"application/octet-stream"}))},!1)},sync:Backbone.localforage.sync("graph-model"),toggle:function(){this.save({active:!this.get("active")})},post:function(e){this.request=new XMLHttpRequest,this.request.open("GET","data:application/octet-stream, ".concat(e),!0),this.request.responseType="arraybuffer",this.request.addEventListener("load",this.onRequest.bind(this),!1),this.request.send(null)},onRequest:function(e){this.worker.postMessage(e.currentTarget.response,[e.currentTarget.response])},cancel:function(){this.worker.terminate()}})});
//# sourceMappingURL=model.js.map