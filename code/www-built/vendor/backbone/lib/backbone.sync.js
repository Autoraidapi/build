!function(e,t){if("function"==typeof define&&define.amd)define(["backbone","underscore"],t);else if("undefined"!=typeof module&&module.exports){var r=require("backbone"),a=require("underscore");module.exports=t(r,a)}else t(e.Backbone,e._)}(this,function(e,t){e.sync=function(a,n,o){var u=r[a];t.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var d={type:u,dataType:"json"};if(o.url||(d.url=t.result(n,"url")||urlError()),null!=o.data||!n||"create"!==a&&"update"!==a&&"patch"!==a||(d.contentType="application/json",d.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(d.contentType="application/x-www-form-urlencoded",d.data=d.data?{model:d.data}:{}),o.emulateHTTP&&("PUT"===u||"DELETE"===u||"PATCH"===u)){d.type="POST",o.emulateJSON&&(d.data._method=u);var l=o.beforeSend;o.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",u),l)return l.apply(this,arguments)}}"GET"===d.type||o.emulateJSON||(d.processData=!1);var i=o.error;o.error=function(e,t,r){o.textStatus=t,o.errorThrown=r,i&&i.call(o.context,e,t,r)};var c=o.xhr=e.ajax(t.extend(d,o));return n.trigger("request",n,c,o),c};var r={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};return e.ajax=function(){return e.$.ajax.apply(e.$,arguments)},e.sync});
//# sourceMappingURL=backbone.sync.js.map