!function(e,t){if("function"==typeof define&&define.amd)define(["backbone","underscore"],t);else if("undefined"!=typeof module&&module.exports){var r=require("backbone"),n=require("underscore");module.exports=t(r,n)}else t(e.Backbone,e._)}(this,function(e,t){var r=e.Router=function(e){e||(e={}),this.preinitialize.apply(this,arguments),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},n=/\((.*?)\)/g,i=/(\(\?)?:\w+/g,o=/\*\w+/g,u=/[\-{}\[\]+?.,\\\^$|#\s]/g;t.extend(r.prototype,Events,{preinitialize:function(){},initialize:function(){},route:function(r,n,i){t.isRegExp(r)||(r=this._routeToRegExp(r)),t.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var o=this;return e.history.route(r,function(t){var u=o._extractParameters(r,t);!1!==o.execute(i,u,n)&&(o.trigger.apply(o,["route:"+n].concat(u)),o.trigger("route",n,u),e.history.trigger("route",o,n,u))}),this},execute:function(e,t,r){e&&e.apply(this,t)},navigate:function(t,r){return e.history.navigate(t,r),this},_bindRoutes:function(){if(this.routes){this.routes=t.result(this,"routes");for(var e,r=t.keys(this.routes);null!=(e=r.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(u,"\\$&").replace(n,"(?:$1)?").replace(i,function(e,t){return t?e:"([^/?]+)"}).replace(o,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,r){var n=e.exec(r).slice(1);return t.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var s=function(e,r){var n,i=this;return n=e&&t.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},t.extend(n,i,r),n.prototype=t.create(i.prototype,e),n.prototype.constructor=n,n.__super__=i.prototype,n};return r.extend=s,e.Router});
//# sourceMappingURL=backbone.router.js.map